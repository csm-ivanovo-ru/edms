# Внутренняя переписка

## Виды документов

Будем использовать следующие основные виды внутренних документов для внутренней переписки:

- докладная записка (для целей информирования,
 не подразумевает рассмотрения и исполнения, только ознакомление)
- служебная записка (подразумевает рассмотрение, исполнение)

Кроме того, могут быть созданы подвиды указанных выше видов документов,
имеющие дополнительные реквизиты для использования в специальных процессах
обработки документов.

## Обработка служебных записок

Выделим следующие основные этапы обработки служебных записок:

- подписание автором
- согласование (при необходимости)
- регистрация
- рассмотрение (при отсутствии специального процесса обработки)
- исполнение
- списание в дело

### Подготовка записки

Процесс подготовки записки включает в себя:

- подписание автором (на этом этапе должна быть завершена подготовка)
- согласование (при необходимости)
- регистрация

В целях сокращения количества процессов и повышения usability для работников
создавать дополнительный процесс "Завершить подготовку документа" до подписания
не вижу смысла. Этап подписания следует запускать сразу после создания документа.

В случае отказа от подписания записки автором документ должен быть удалён процессом.

- [x] следует исправить настройки доступности по состоянию и разрешить
 изменять записки в состоянии "На подписании".
 Настройка "Внутренняя переписка - для всех пользователей"
- [x] добавить возможность настройки доступности по состоянию
 для групп видов документов
 Добавлено в расширении ДокументооборотКОРП_АдаптацияНастроекДоступностиПоСостоянию
- [ ] TODO: удалять записки при отказе автора от их подписания
- [ ] TODO: предлагать добавлять согласующих на этапе подписания (завершения подготовки)

### Исполнение записки

Процесс исполнения предусматривает один из трёх процессов:

- рассмотрение адресатом (при отсутствии специального процесса обработки)
- исполнение
- ознакомление

#### Ознакомление с докладными записками

Самый простой случай исполнения записки - ознакомления с докладной запиской.
Этот процесс должен быть запущен для докладных записок после регистрации.
Никаких других процессов исполнения в этом случае не требуется.
Исполнитель для ознакомления - адресат.

- [x] реализовать процесс ознакомления для докладных записок.
 Запускать сразу после регистрации
- [x] в процессе ознакомления организовать ветвление и менять важность задачи
 на основании разделяемого дополнительного реквизита документа "Важность".
 Для важных документов устанавливать и более короткий срок ознакомления

#### Рассмотрение служебных записок

Процесс рассмотрения следует запускать для служебных записок.
Только в том случае, если служебная записка не имеет специального процесса
исполнения (необходимо условие маршрутизации).
Дальнейшее исполнение - по результатам рассмотрения.

Таких процессов следует избегать. Этот процесс должен использоваться как исключение,
а не как правило.

- [ ] TODO: реализовать процесс рассмотрения служебных записок адресатом.
 Запускать сразу после регистрации
- [ ] TODO: добавить условие маршрутизации для процесса рассмотрения
 (только с/з, не имеющие специального процесса исполнения)

#### Специальные процессы исполнения служебных записок

Если возможно, должен быть создан специальный процесс исполнения.
Он должен быть запущен после регистрации.
В этом случае рассмотрение не требуется.

### Списание записки в дело

При регистрации служебной записки автоматически запускается процесс
"Обработка внутреннего документа: списание в дело", при условии
"Не имеет специальную процедуру списания И не списан в дело (вн.)".
Исполнитель выбирается на основе
[автоподстановки "Делопроизводитель подразделения"](../../../Автоподстановки/Делопроизводитель%20подразделения/),
поэтому крайне важно указать в карточке документа именно то подразделение,
которое будет отвечать за документооборот по записке, т.е. в дела которого
записка будет списана после рассмотрения / исполнения.

- [x] реализовано
- [ ] TODO: заменить процесс "Списание в дело (ответственному за документ)"
 на описанный выше (это шаблон поручения)
